<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: AdSession</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: AdSession</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>AdSession<span class="signature">(context<span class="signature-attributes">non-null</span>, communication<span class="signature-attributes">opt, nullable</span>, sessionInterface<span class="signature-attributes">opt, nullable</span>)</span><span class="type-signature"></span></h2>
        
            <div class="class-description">The JS ad session API enabling the integration partner to contribute to an
existing native ad session. This is also responsible for communicating to
the OM SDK JS service and will also handle scenarios with limited access
to the OM SDK JS service - i.e. cross-domain iFrames.
This API is commonly used in the following scenarios;
 - video ad session relying on the HTML5 video player for injecting
   verification script resources and/or publishing OMID video events.
 - display ad session relying on a separate JS component to handle the
   impression event.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="AdSession"><span class="type-signature"></span>new AdSession<span class="signature">(context<span class="signature-attributes">non-null</span>, communication<span class="signature-attributes">opt, nullable</span>, sessionInterface<span class="signature-attributes">opt, nullable</span>)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>context</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Context.html">Context</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">that provides the required information for
  initialising the JS ad session.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>communication</code></td>
            

            <td class="type">
            
                
<span class="param-type">Communication.&lt;?></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">This parameter is for OM SDK
   internal use only and should be omitted.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sessionInterface</code></td>
            

            <td class="type">
            
                
<span class="param-type">OmidJsSessionInterface</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">This parameter is for
   OM SDK internal use only and should be omitted.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line39">line 39</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        error if the supplied context is undefined or null.
    
    </div>


    







    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="assertSessionRunning"><span class="type-signature"></span>assertSessionRunning<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Throws an error if the session is not running.
NOTE: This method is friend scoped. Therefore it should not be exported
beyond obfuscation.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line401">line 401</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="creativeLoaded"><span class="type-signature"></span>creativeLoaded<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Handles when a load event has occurred.
Sets a flag of this class so that it can remember that a loaded event
has occured.
NOTE: This method is friend scoped. Therefore it should not be exported
beyond obfuscation.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line437">line 437</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        error if creativeType or impressionType has not be redefined
from the JS layer. Both the creative and impression types must be redefined
by the JS layer before the loaded event can be sent from the JS layer.
    
    </div>


    







        
            

    

    
    <h4 class="name" id="error"><span class="type-signature"></span>error<span class="signature">(errorType<span class="signature-attributes">non-null</span>, message)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Notifies that an error has occurred on the ad session.
All verification clients will be notified via the 'sessionError' session
observer event.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>errorType</code></td>
            

            <td class="type">
            
                
<span class="param-type">ErrorType</span>


            
            </td>

            

            

            <td class="description last">High level error type.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Description of the session error.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line281">line 281</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="finish"><span class="type-signature"></span>finish<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    If there is a currently active ad session, this notifies all session
observers that the ad session has finished with a SESSION_FINISH event.
This ceases ad view tracking and message sending to verification scripts
injected for the ad session. This method has no effect if called if there
is no active ad session or in a mobile app environment.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line269">line 269</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getAdSessionId"><span class="type-signature"></span>getAdSessionId<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Get the ID of this ad session.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line128">line 128</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="impressionOccurred"><span class="type-signature"></span>impressionOccurred<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Handles when an impression has occurred.
Sets a flag of this class so that it can remember that an impression has
occured.
NOTE: This method is friend scoped. Therefore it should not be exported
beyond obfuscation.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line417">line 417</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        error if creativeType or impressionType has not be redefined
from the JS layer. Both the creative and impression types must be redefined
by the JS layer before the impression event can be sent from the JS layer.
    
    </div>


    







        
            

    

    
    <h4 class="name" id="isSupported"><span class="type-signature"></span>isSupported<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Returns true if OMID is available, false otherwise.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line209">line 209</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="registerAdEvents"><span class="type-signature"></span>registerAdEvents<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Registers the existence of an AdEvent instance.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line289">line 289</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="registerMediaEvents"><span class="type-signature"></span>registerMediaEvents<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Registers the existence of an MediaEvents instance.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line300">line 300</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="registerSessionObserver"><span class="type-signature"></span>registerSessionObserver<span class="signature">(functionToExecute)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Subscribes to all session events ('sessionStart', 'sessionError', and
'sessionFinish').
The event handler will be called with a single argument that has the
following fields:
  'adSessionId': string,
  'timestamp': number,
  'type': string,
  'data': object
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>functionToExecute</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">An event handler which will be
    invoked on session events.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line240">line 240</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendMessage"><span class="type-signature"></span>sendMessage<span class="signature">(method, responseCallback<span class="signature-attributes">nullable</span>, &hellip;args)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sends a message to the OMID SessionService.
NOTE: This method is friend scoped. Therefore it should not be exported
beyond obfuscation.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>method</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Name of the remote method to invoke.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>responseCallback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last">Callback to be called when a
    response is received.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">?</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">Arguments to use when invoking the remote function.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line330">line 330</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendOneWayMessage"><span class="type-signature"></span>sendOneWayMessage<span class="signature">(method, &hellip;args)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sends a message to the OMID VerificationService and ignores responses.
NOTE: This method is friend scoped. Therefore it should not be exported
beyond obfuscation.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>method</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Name of the remote method to invoke.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">?</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">Arguments to use when invoking the remote
    function.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line316">line 316</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setCreativeType"><span class="type-signature"></span>setCreativeType<span class="signature">(creativeType<span class="signature-attributes">non-null</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Specifies the type of creative to be rendered in this session.
Requires that the native layer set the creative type to
DEFINED_BY_JAVASCRIPT.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>creativeType</code></td>
            

            <td class="type">
            
                
<span class="param-type">CreativeType</span>


            
            </td>

            

            

            <td class="description last">The type of creative.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        error if arg type is DEFINED_BY_JAVASCRIPT.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        error if impression has already occured.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        error if creative has already loaded.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        error if creativeType was already defined to something
other than DEFINED_BY_JAVASCRIPT.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        error if native integration has started and
is using OMID 1.2 or earlier.
    
    </div>

</li>
    </ul>







        
            

    

    
    <h4 class="name" id="setElementBounds"><span class="type-signature"></span>setElementBounds<span class="signature">(elementBounds<span class="signature-attributes">nullable</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Set the DOM element's geometry relative to the geometry of either the
slotElement or the cross domain iframe the creative's DOM element is in.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>elementBounds</code></td>
            

            <td class="type">
            
                
<span class="param-type">Rectangle</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line531">line 531</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        Error if the elementBounds parameter is null or undefined.
    
    </div>


    







        
            

    

    
    <h4 class="name" id="setImpressionType"><span class="type-signature"></span>setImpressionType<span class="signature">(impressionType<span class="signature-attributes">non-null</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Specifies the type of impression to be triggered in this session.
Requires that the native layer set the impression type to
DEFINED_BY_JAVASCRIPT.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>impressionType</code></td>
            

            <td class="type">
            
                
<span class="param-type">ImpressionType</span>


            
            </td>

            

            

            <td class="description last">The type of impression.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line181">line 181</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        error if arg type is DEFINED_BY_JAVASCRIPT
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        error if impression has already occurred
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        error if impressionType was already defined to something
other than DEFINED_BY_JAVASCRIPT.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        error if native integration has started and is
using OMID 1.2 or earlier.
    
    </div>

</li>
    </ul>







        
            

    

    
    <h4 class="name" id="start"><span class="type-signature"></span>start<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    If there is no currently active ad session, this notifies all session
observers that an ad session has started with a SESSION_START event.
This starts ad view tracking and makes video and ad events available to
send to verification scripts injected for this ad session. This method
has no effect if called after the ad session has already started or in a
mobile app environment.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="session-client_ad-session.js.html">session-client/ad-session.js</a>, <a href="session-client_ad-session.js.html#line253">line 253</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AdEvents.html">AdEvents</a></li><li><a href="AdSession.html">AdSession</a></li><li><a href="Context.html">Context</a></li><li><a href="MediaEvents.html">MediaEvents</a></li><li><a href="OmidVersion.html">OmidVersion</a></li><li><a href="Partner.html">Partner</a></li><li><a href="VerificationClient.html">VerificationClient</a></li><li><a href="VerificationScriptResource.html">VerificationScriptResource</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Feb 11 2025 22:31:35 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>